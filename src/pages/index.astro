---
import BlogLayout from "../layouts/BlogLayout.astro";
import { getCollection } from "astro:content";
import { Image } from "astro:assets";

const posts = (
	await getCollection("blog", ({ data }) => {
		return import.meta.env.PROD ? data.draft !== true : true;
	})
).sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf());

const featuredPosts = posts.slice(0, 3);
---

<BlogLayout title="Yasin Kavakli" description="Designer, developer, and storyteller.">
	<div class="flex flex-col gap-16 md:gap-24">
		<!-- Hero Section -->
		<section class="text-center max-w-2xl mx-auto space-y-6">
			<h2
			>
				Welcome stranger
			</h2>
			<p class="text-muted-foreground leading-relaxed">
				Writing about software, design, and the things I build.
			</p>
		</section>

		<!-- Recent Writing -->
		{
			featuredPosts.length > 0 && (
				<section>
					<div class="flex items-center justify-between mb-8">
						<h2 class="text-2xl font-bold">Recent Writing</h2>
						<a
							href="/blog"
							class="text-sm font-medium hover:underline underline-offset-4"
						>
							View All
						</a>
					</div>
					<div class="grid grid-cols-1 md:grid-cols-2 gap-8">
						{featuredPosts.map((post, index) => (
							<a
								href={`/blog/${post.id}/`}
								class="group space-y-3"
							>
								<div>
									<span class="font-semibold leading-tight group-hover:text-primary transition-colors">
										{post.data.title}
									</span>
									<p class="text-sm text-muted-foreground mt-1">
										{post.data.pubDate.toLocaleDateString(
											"en-US",
											{
												year: "numeric",
												month: "long",
												day: "numeric",
											},
										)}
									</p>
								</div>
							</a>
						))}
					</div>
				</section>
			)
		}

	</div>
</BlogLayout>
